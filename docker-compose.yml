services:
  packagefactory:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Change this value to force rebuild (breaks Docker cache)
        # Use current timestamp: date +%s
        CACHEBUST: "2025-10-30-v2.0.1"
    container_name: packagefactory-v2
    ports:
      - "8080:8080"
    volumes:
      # Persistent output directory
      - ./Output:/app/Output
      # Persistent configuration
      - ./Config:/app/Config
      # Optional: Custom templates
      - ./Generator/Templates:/app/Generator/Templates
    environment:
      - TZ=Europe/Vienna
    restart: unless-stopped
    networks:
      - packagefactory-net

networks:
  packagefactory-net:
    driver: bridge

# Usage:
# docker-compose up -d        # Start in background
# docker-compose logs -f      # View logs
# docker-compose down         # Stop and remove container
# docker-compose restart      # Restart container
